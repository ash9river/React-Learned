# User Authentication

## 사용자 인증의 원리

- 사용자가 로그인 요청을 백엔드에 보낸다.
- 그러면 서버는 어떻게 응답을 해야 하는가?
  - 단순히 응답에 `yes`라고 대답하면 안된다. 가짜 응답으로 정보를 탈취할 수 있기 때문이다.
- 보통 다음에 저술될 두 가지 방법을 사용한다.

### 서버 사이드 세션(Server-side Sessions)

- 프론트엔드와 백엔드가 분리되지 않은 풀스택 앱에서 자주 사용하는 대중적인 방법이다.
- 클라이언트가 로그인하고 인증된, 서버에 고유 식별자를 저장한다.
- 기본적으로 `yes`를 서버에 저장하고, 식별자를 이용해, 그 대답을 특정 클라이언트와 연결한다.
- 그리고 그 식별자를 다시 클라이언트에 보낸다.
- 그 이후, 클라이언트가 요청을 통해 보호되어 있는 리소스에 접근할 때, 해당 식별자를 전송한다.
- 서버는 이 클라이언트에 그 리소스에 접근할 권한이 있는지 이 식별자를 통해 확인한다.

> 이 방법은 백엔드가 클라이언트 관련 정보를 반드시 저장해야 하기 때문에, 백엔드와 프론트엔드 사이의 긴밀한 결합이 필요하다.
> 그러나 리액트에서는 보통 백엔드와 분리되어 있기 때문에, 적절하진 않다.

### 인증 토큰(Authentication Tokens)

- 클라이언트가 서버에 유효한 자격 증명을 전송한다. 그 다음에 서버에서 허가 토큰(permission token)을 생성한다.
- 이 허가 토큰은 기본적으로 생성되었을 때, 어느 저장 공간에도 저장되지 않는다.
  - 이 토큰은 또한, 알고리즘에 따라 생성된 스트링으로 몇 가지 정보를 포함한다.
- 백엔드에서는 이 토큰을 생성하고, 클라이언트에게 전송한다.
  - 이 토큰을 생성한 백엔드만 해당 토큰의 유효성을 확인하고 검증할 수 있다.(백엔드만 알 수 있는 개인 키 사용)
- 이후, 클라이언트에서 백엔드에 요청을 보낼 때, 해당 토큰을 첨부하면 백엔드에서 검증하고, 보호된 리소스에 대한 접근을 승인한다.



















ㅁ
